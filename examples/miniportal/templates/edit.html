{% extends "admin/base.html" %}
{% import 'admin/static.html' as admin_static with context %}

{% block container_classes %}container-fluid{% endblock %}

{% block head_css %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/codemirror.css') }}">
    <style>
    </style>

{% endblock %}

{% block tail_js %}
    {{ super() }}
    <script src="{{ url_for('static', filename='codemirror/codemirror.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='codemirror/mode/javascript/javascript.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='underscore/underscore.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='marked/marked.min.js') }}" type="text/javascript"></script>
    <script>

    $(function() {
        marked.setOptions({
            renderer: new marked.Renderer(),
            gfm: true,
            tables: true,
            breaks: false,
            pedantic: false,
            sanitize: true,
            smartLists: true,
            smartypants: false
        });

        var editor = CodeMirror.fromTextArea($('.codemirror')[0], { lineNumbers: true });
        var render = function() {
            var content = editor.getValue();
            $('#preview').html(marked(content));
        };
        render();
        editor.on('change', render);
    });
    </script>
{% endblock %}


{% block body %}
<div class="row">
    <div class="col-md-6">
        <textarea id="codemirror" class="codemirror">{{ page.raw_content }}</textarea>
    </div>
    <div class="col-md-6">
        <div id="preview"></div>
    </div>
</div>
{% endblock body %}

